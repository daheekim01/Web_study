`.circleci/config.yml` 파일은 **CircleCI**라는 CI/CD 도구의 설정 파일입니다.
이 파일이 **외부에 노출**되었거나 공격자가 접근할 수 있다면, 다음과 같은 **보안 취약점**이나 **정보 유출**로 이어질 수 있습니다.

---

## 🔍 `.circleci/config.yml` 파일이란?

* CircleCI의 **파이프라인 빌드 및 배포 과정**을 정의하는 설정 파일
* 보통 프로젝트 루트에 `.circleci/config.yml` 경로로 존재
* YAML 형식으로 작성됨
* 예시:

  ```yaml
  version: 2.1
  jobs:
    build:
      docker:
        - image: cimg/node:14.17
      steps:
        - checkout
        - run: npm install
        - run: npm test
  ```

---

## 🔓 노출 시 위험한 내용 (취약점)

공격자가 `/\.circleci/config\.yml`을 요청해서 **200 OK로 응답되었다면**, 다음 정보들이 유출될 수 있습니다:

### 1. 🧠 **내부 CI/CD 구조 노출**

* 어떤 이미지(예: `docker`, `node`, `python`)를 사용하는지
* 어떤 명령어들이 자동 실행되는지 (`npm install`, `curl`, `deploy` 등)
* 내부 스크립트 경로, 스테이지 구조, 디렉터리 구조 등

➡️ **공격자는 이 정보를 이용해 내부 서버나 개발환경을 추정**할 수 있습니다.

---

### 2. 🔑 **환경 변수 사용 흔적**

```yaml
- run:
    name: Deploy
    command: ssh deploy@$SERVER "bash deploy.sh"
```

* `ENV`나 `context`, `parameters`, `secrets` 등을 통해 **환경 변수** 사용 시
* 환경 변수 이름 (`AWS_SECRET`, `DB_PASSWORD`, `GITHUB_TOKEN`) 자체가 노출되면 **민감 데이터의 존재 여부**를 알려줌

> ☠️ 실제 값은 보통 GitHub이나 CircleCI UI에서만 주입되지만, 변수명이 드러나는 것만으로도 공격자는 **무차별 추측**이나 **타이핑 공격**을 시도할 수 있음

---

### 3. ⚠️ **하드코딩된 비밀 값**

가끔 실수로 아래와 같이 **비밀번호나 API 키**를 직접 적어두는 경우가 있습니다:

```yaml
- run: curl -H "Authorization: Bearer sk_test_51Hu..." https://api.stripe.com/v1/customers
```

➡️ 이런 키가 노출되면 **Stripe, AWS, GitHub 등 외부 서비스에 무단 접근 가능**

---

### 4. 🧪 **테스트/배포 명령어 유출**

* 어떤 테스트를 실행하는지 (`pytest`, `jest`, `go test`)
* 어떤 서버에 배포하는지 (`scp`, `rsync`, `ssh deploy@yourserver.com`)

➡️ 공격자가 **내부 서버 도메인/IP, 포트, 인증 방식** 등을 파악 가능
➡️ 때로는 **서버 IP와 SSH 키 경로**까지 유출됨

---

## 📌 노출 확인 방법

### 브라우저로 확인:

```
https://example.com/.circleci/config.yml
```

### 커맨드라인 (Linux/macOS):

```bash
curl -i https://example.com/.circleci/config.yml
```

> 200 OK이면 → 노출되어 있음
> 403 또는 404이면 → 차단 혹은 없음

